## API Report File for "@annotator/ai"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type { Box } from 'annotator';
import type { BoxModel } from 'annotator';
import { Editor } from 'annotator';
import type { TLBinding } from 'annotator';
import type { TLBindingCreate } from 'annotator';
import type { TLBindingId } from 'annotator';
import type { TLBindingUpdate } from 'annotator';
import type { TLContent } from 'annotator';
import type { TLShape } from 'annotator';
import type { TLShapeId } from 'annotator';
import type { TLShapePartial } from 'annotator';

// @public (undocumented)
export function asMessage(message: TLAiMessages): TLAiMessage[];

// @public
export type TLAiChange = TLAiCreateBindingChange | TLAiCreateShapeChange | TLAiDeleteBindingChange | TLAiDeleteShapeChange | TLAiUpdateBindingChange | TLAiUpdateShapeChange;

// @public (undocumented)
export type TLAiContent = Omit<TLContent, 'rootShapeIds' | 'schema'> & {
    bindings: TLBinding[];
};

// @public (undocumented)
export interface TLAiCreateBindingChange<B extends TLBinding = TLBinding> {
    // (undocumented)
    binding: TLBindingCreate<B>;
    // (undocumented)
    description: string;
    // (undocumented)
    type: 'createBinding';
}

// @public (undocumented)
export interface TLAiCreateShapeChange<T extends TLShape = TLShape> {
    // (undocumented)
    description: string;
    // (undocumented)
    shape: TLShapePartial<T>;
    // (undocumented)
    type: 'createShape';
}

// @public (undocumented)
export interface TLAiDeleteBindingChange {
    // (undocumented)
    bindingId: TLBindingId;
    // (undocumented)
    description: string;
    // (undocumented)
    type: 'deleteBinding';
}

// @public (undocumented)
export interface TLAiDeleteShapeChange {
    // (undocumented)
    description: string;
    // (undocumented)
    shapeId: TLShapeId;
    // (undocumented)
    type: 'deleteShape';
}

// @public (undocumented)
export interface TLAiImageMessage {
    // (undocumented)
    mimeType: string;
    // (undocumented)
    src: string;
    // (undocumented)
    type: 'image';
}

// @public (undocumented)
export type TLAiMessage = TLAiImageMessage | TLAiTextMessage;

// @public (undocumented)
export type TLAiMessages = string | TLAiMessage | TLAiMessage[];

// @public
export interface TLAiPrompt {
    canvasContent: TLAiContent;
    contextBounds: Box;
    image?: string;
    message: string | TLAiMessage[];
    meta?: any;
    promptBounds: Box;
}

// @public
export interface TLAiResult {
    // (undocumented)
    changes: TLAiChange[];
}

// @public
export interface TLAiSerializedPrompt extends Omit<TLAiPrompt, 'contextBounds' | 'promptBounds'> {
    contextBounds: BoxModel;
    promptBounds: BoxModel;
}

// @public (undocumented)
export interface TLAiTextMessage {
    // (undocumented)
    text: string;
    // (undocumented)
    type: 'text';
}

// @public (undocumented)
export interface TLAiUpdateBindingChange<B extends TLBinding = TLBinding> {
    // (undocumented)
    binding: TLBindingUpdate<B>;
    // (undocumented)
    description: string;
    // (undocumented)
    type: 'updateBinding';
}

// @public (undocumented)
export interface TLAiUpdateShapeChange<T extends TLShape = TLShape> {
    // (undocumented)
    description: string;
    // (undocumented)
    shape: Omit<TLShapePartial<T>, 'type'> & {
        type?: T['type'];
    };
    // (undocumented)
    type: 'updateShape';
}

// @public
export type AnnotatorAiGenerateFn = (opts: {
    editor: Editor;
    prompt: TLAiSerializedPrompt;
    signal: AbortSignal;
}) => Promise<TLAiChange[]>;

// @public
export class AnnotatorAiModule {
    constructor(opts?: AnnotatorAiModuleOptions);
    applyChange(change: TLAiChange): void;
    // (undocumented)
    dispose(): void;
    generate(prompt: {
        message: TLAiMessages;
        stream?: boolean;
    } | string): Promise<{
        handleChange: (change: TLAiChange) => void;
        handleChanges: (changes: TLAiChange[]) => void;
        prompt: TLAiPrompt;
    }>;
    getPrompt(prompt: TLAiMessages, options?: Partial<Pick<TLAiPrompt, "canvasContent" | "contextBounds" | "promptBounds">>): Promise<TLAiPrompt>;
    // (undocumented)
    readonly opts: AnnotatorAiModuleOptions;
}

// @public (undocumented)
export interface AnnotatorAiModuleOptions {
    // (undocumented)
    editor: Editor;
    // (undocumented)
    transforms?: AnnotatorAiTransformConstructor[];
}

// @public (undocumented)
export interface AnnotatorAiOptions extends Omit<AnnotatorAiModuleOptions, 'editor'> {
    // (undocumented)
    editor?: Editor;
    // (undocumented)
    generate?: AnnotatorAiGenerateFn;
    // (undocumented)
    stream?: AnnotatorAiStreamFn;
}

// @public (undocumented)
export type AnnotatorAiPromptOptions = {
    message: TLAiPrompt['message'];
    stream?: boolean;
} | string;

// @public
export type AnnotatorAiStreamFn = (opts: {
    editor: Editor;
    prompt: TLAiSerializedPrompt;
    signal: AbortSignal;
}) => AsyncGenerator<TLAiChange>;

// @public (undocumented)
export abstract class AnnotatorAiTransform {
    constructor(editor: Editor);
    // (undocumented)
    editor: Editor;
    transformChange?(change: TLAiChange): TLAiChange;
    transformChanges?(changes: TLAiChange[]): TLAiChange[];
    transformPrompt?(prompt: TLAiPrompt): TLAiPrompt;
}

// @public (undocumented)
export interface AnnotatorAiTransformConstructor {
    // (undocumented)
    new (editor: Editor): AnnotatorAiTransform;
}

// @public (undocumented)
export function useAnnotatorAi(opts: AnnotatorAiOptions): {
    cancel: () => void;
    prompt: (message: AnnotatorAiPromptOptions) => {
        cancel: () => void;
        promise: Promise<void>;
    };
    repeat: () => {
        cancel: (() => void) | null;
        promise: Promise<void>;
    };
};

// (No @packageDocumentation comment for this package)

```
